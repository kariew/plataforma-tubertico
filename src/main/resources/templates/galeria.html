<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head('Galería | Tubertico')"></head>
<body>
    <!-- Header -->
    <div th:replace="fragments/header :: header"></div>

    <style>
    .banner-galeria {
        position: relative;
        background: url('/img/fondo_galeria.jpg') center center / cover no-repeat;
        color: white;
        min-height: 460px;
        display: flex;
        align-items: center;
        overflow: hidden;
    }
    .banner-galeria::before {
        content: "";
        position: absolute;
        top: 0; left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.45);
        z-index: 1;
    }
    .contenido-banner {
        position: relative;
        z-index: 2;
    }
    .texto-intro {
        color: #e5e5e5;
        font-size: 1.1rem;
        line-height: 1.7;
        font-weight: 400;
    }
    @media (max-width: 768px) {
        .banner-galeria {
            padding: 40px 20px;
        }
    }
    .galeria-thumb {
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
    }
    .galeria-thumb:hover {
        transform: scale(1.04);
        box-shadow: 0 4px 16px rgba(0,0,0,0.18);
    }
    .nav-tabs .nav-link {
        color: #5f6c2c;
        background-color: #fff;
        border: 1px solid #dee2e6;
        font-family: inherit;
        border-radius: 0.5rem 0.5rem 0 0;
        margin: 0 2px;
        transition: background 0.2s, color 0.2s;
    }
    .nav-tabs .nav-link.active {
        color: #5f6c2c;
        background-color: #fff;
        border-bottom: 2px solid #fff;
        font-weight: bold;
    }
    .nav-tabs .nav-link:not(.active) {
        color: #fff;
        background-color: #5f6c2c;
        border: 1px solid #5f6c2c;
    }
    </style>

    <!-- Banner de Galería -->
    <section class="banner-galeria">
        <div class="container contenido-banner">
            <div class="row align-items-center">
                <!-- Título -->
                <div class="col-md-6 text-center text-md-start mb-4 mb-md-0">
                    <h2 class="fw-light text-uppercase" style="letter-spacing: 2px;">Nuestra</h2>
                    <h1 class="fw-bold display-4 text-uppercase">GALERÍA</h1>
                </div>
                <!-- Frase -->
                <div class="col-md-6">
                    <p class="texto-intro">
                        Explorá nuestras instalaciones, nuestros procesos y nuestros productos a través de esta selección de imágenes.
                        Cada fotografía refleja el compromiso de Tubertico con la calidad, la innovación y la sostenibilidad en cada etapa del trabajo.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Grids de Galería con Tabs -->
    <div class="container py-5">
        <!-- Subpestañas -->
        <ul class="nav nav-tabs justify-content-center mb-4" id="galeriaTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active text-uppercase fw-bold" id="todos-tab" data-bs-toggle="tab" data-bs-target="#todos" type="button" role="tab" aria-controls="todos" aria-selected="true">
                    Todos
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link text-uppercase fw-bold" id="productos-tab" data-bs-toggle="tab" data-bs-target="#productos" type="button" role="tab" aria-controls="productos" aria-selected="false">
                    Productos
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link text-uppercase fw-bold" id="compania-tab" data-bs-toggle="tab" data-bs-target="#compania" type="button" role="tab" aria-controls="compania" aria-selected="false">
                    Compañía
                </button>
            </li>
        </ul>
        <div class="tab-content" id="galeriaTabsContent">
            <!-- Grid TODOS (ambos, sin títulos) -->
            <div class="tab-pane fade show active" id="todos" role="tabpanel" aria-labelledby="todos-tab">
                <div class="row g-3 mb-5">
                    <!-- Imágenes de productos -->
                    <div class="col-6 col-md-4 col-lg-3" th:each="img, iter : ${productos}">
                        <a href="#" data-bs-toggle="modal" th:attr="data-bs-target='#modalProducto' + ${iter.index}">
                            <img th:src="${img}" class="img-fluid rounded shadow-sm galeria-thumb" alt="Producto [[${iter.index+1}]]">
                        </a>
                    </div>
                    <!-- Imágenes de compañía -->
                    <div class="col-6 col-md-4 col-lg-3" th:each="img, iter : ${compania}">
                        <a href="#" data-bs-toggle="modal" th:attr="data-bs-target='#modalCompania' + ${iter.index}">
                            <img th:src="${img}" class="img-fluid rounded shadow-sm galeria-thumb" alt="Compañía [[${iter.index+1}]]">
                        </a>
                    </div>
                </div>
            </div>
            <!-- Grid de Productos -->
            <div class="tab-pane fade" id="productos" role="tabpanel" aria-labelledby="productos-tab">
                <div class="row g-3 mb-5">
                    <div class="col-6 col-md-4 col-lg-3" th:each="img, iter : ${productos}">
                        <a href="#" data-bs-toggle="modal" th:attr="data-bs-target='#modalProducto' + ${iter.index}">
                            <img th:src="${img}" class="img-fluid rounded shadow-sm galeria-thumb" alt="Producto [[${iter.index+1}]]">
                        </a>
                    </div>
                </div>
            </div>
            <!-- Grid de Compañía -->
            <div class="tab-pane fade" id="compania" role="tabpanel" aria-labelledby="compania-tab">
                <div class="row g-3 mb-5">
                    <div class="col-6 col-md-4 col-lg-3" th:each="img, iter : ${compania}">
                        <a href="#" data-bs-toggle="modal" th:attr="data-bs-target='#modalCompania' + ${iter.index}">
                            <img th:src="${img}" class="img-fluid rounded shadow-sm galeria-thumb" alt="Compañía [[${iter.index+1}]]">
                        </a>
                    </div>
                </div>
            </div>
            <!-- Modales de productos (fuera de los tabs para ser accesibles desde cualquier grid) -->
            <div th:each="img, iter : ${productos}">
                <div class="modal fade" th:id="'modalProducto' + ${iter.index}" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content bg-dark">
                            <div class="modal-body p-0">
                                <img th:src="${img}" class="img-fluid w-100" alt="Producto [[${iter.index+1}]]">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div th:each="img, iter : ${compania}">
                <div class="modal fade" th:id="'modalCompania' + ${iter.index}" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content bg-dark">
                            <div class="modal-body p-0">
                                <img th:src="${img}" class="img-fluid w-100" alt="Compañía [[${iter.index+1}]]">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div th:replace="fragments/footer :: footer"></div>

    <!-- Bootstrap JS ya incluido en header -->
</body>
</html>
